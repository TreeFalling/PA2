<h1>Movies</h1>

<table>
  <thead>
  <tr>
    <th class="<%= 'sorted-asc' if @sort_column == 'title' && @sort_direction == 'asc' %>
               <%= 'sorted-desc' if @sort_column == 'title' && @sort_direction == 'desc' %>">
      <%= link_to "Title", movies_path(sort_by: 'title', direction: toggle_direction('title')), id: 'title_header' %>
    </th>
    <th class="<%= 'sorted-asc' if @sort_column == 'rating' && @sort_direction == 'asc' %>
               <%= 'sorted-desc' if @sort_column == 'rating' && @sort_direction == 'desc' %>">
      <%= link_to "Rating", movies_path(sort_by: 'rating', direction: toggle_direction('rating')), id: 'rating_header' %>
    </th>
    <th class="<%= 'sorted-asc' if @sort_column == 'release_date' && @sort_direction == 'asc' %>
               <%= 'sorted-desc' if @sort_column == 'release_date' && @sort_direction == 'desc' %>">
      <%= link_to "Release Date", movies_path(sort_by: 'release_date', direction: toggle_direction('release_date')), id: 'release_date_header' %>
    </th>
  </tr>
  </thead>


  <tbody>
  <% @movies.each do |movie| %>
    <tr>
      <td><%= movie.title %></td>
      <td><%= movie.rating %></td>
      <td><%= movie.release_date.strftime('%Y-%m-%d') %></td> <!-- Format the date -->
    </tr>
  <% end %>
  </tbody>

  <tfoot>
  <tr>
    <td colspan="3">Total Movies: <%= @movies.count %></td>
  </tr>
  </tfoot>
</table>

<%= link_to 'New movie', new_movie_path %>

<style>
    /* Style for highlighting sorted column headers */
    .sorted-asc, .sorted-desc {
        font-weight: bold;
        color: #4CAF50; /* Green color for visual cue */
    }
    .sorted-desc {
        color: #F44336; /* Red color for reverse sorting */
    }
    /* Add a symbol for the sorted column */
    .sorted-asc:after {
        content: " \2191"; /* Upward arrow for ascending sort */
    }
    .sorted-desc:after {
        content: " \2193"; /* Downward arrow for descending sort */
    }
    /* Additional styling */
    table {
        width: 100%;
        border-collapse: collapse;
    }
    th, td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;
    }
    th {
        background-color: #f2f2f2;
    }
</style>

